<head></head>
<body style="background-color: #F5F8FA;">

  <div id="container" style="font-family: Verdana, Arial; color: #F5F8FA; font-weight: 500;
  background-color: #FF601C; max-width: 100%; height: auto; padding: 6px; border-radius: 3px;">
    <h1>Video Info</h1>
    <form>
      <div>
        <label>Select video</label>
        <input type="file" accept="video/*" />
      </div>
      <button type="submit">Get Info</button>
    </form>

    <div id="result" style="font-family: Consolas, Verdana, Arial; font-size: 17px; font-weight: 100;
    background-color: #3A5FB0; color: #F5F8FA; border-radius: 6px; max-width: 246px; padding-left: 8px;"></div>

    <script>
    const electron = require('electron');
    const { ipcRenderer } = electron;

document.querySelector('form').addEventListener('submit', () => {
  event.preventDefault();
  const { path } = document.querySelector('input').files[0];

  ipcRenderer.send('video:submit', path);
});

const durationFormat = (dur) => {
  const durHour = dur>=3600 ? ((dur/3600) - (dur%3600)).toFixed() : 0;
  const durMin = dur>=60 ? (dur/60-1).toFixed() : 0;
  const durSec = (dur%60).toFixed(2);

  const durHourStr = durHour ? durHour.toString() : '00';
  const durMinStr = durMin>=10 ? durMin.toString() : `0${durMin}`;
  const durSecStr = durSec>=10 ? durSec.toString() : `0${durSec}`;

  return `${durHourStr} : ${durMinStr} : ${durSecStr}`;
}

ipcRenderer.on('video:metadata', (event, duration) => {
  document.querySelector('#result').innerHTML = `Duration ${durationFormat(duration)}`;
});
</script>
  </div>

</body>
